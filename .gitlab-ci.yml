---
include:
  - local: '.gitlab-ci-pages.yml'
  - local: '.gitlab-ci-slides.yml'

python:
  image: debian:bullseye
  script:
    - apt-get update
    - apt-get install -y git
    - git submodule update --init --recursive
    - scripts/provision-packaging-python
    - make build-python-package
  artifacts:
    paths:
      - dist
  only:
    - main

debian:
  image: debian:bullseye
  script:
    - apt-get update
    - apt-get install -y git
    - git submodule update --init --recursive
    - scripts/provision-packaging-debian
    - sbuild-update -udcar u
    - sbuild -c unstable-amd64-sbuild
    - rm -rf /srv/chroot
  artifacts:
    paths:
      - /srv
  only:
    - main
